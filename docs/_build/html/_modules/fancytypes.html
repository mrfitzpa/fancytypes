<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>fancytypes &mdash; fancytypes  documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/readthedocs-custom.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/sphinx_highlight.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../index.html" class="icon icon-home"> fancytypes
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../index.html">home</a></li>
<li class="toctree-l1"><a class="reference internal" href="../INSTALL.html">1. Installation instructions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../_autosummary/fancytypes.html">2. Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../examples.html">3. Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../todo.html">4. To-Do list</a></li>
<li class="toctree-l1"><a class="reference internal" href="../changelog.html">5. CHANGELOG</a></li>
<li class="toctree-l1"><a class="reference internal" href="../license.html">6. License</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">fancytypes</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home"></a></li>
          <li class="breadcrumb-item"><a href="index.html">Module code</a></li>
      <li class="breadcrumb-item active">fancytypes</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <h1>Source code for fancytypes</h1><div class="highlight"><pre>
<span></span><span class="sd">&quot;&quot;&quot;``fancytypes`` is a simple Python library that defines some classes with</span>
<span class="sd">useful features, such as enforced validation, updatability, pre-serialization,</span>
<span class="sd">and de-pre-serialization. These classes can be used to define more complicated</span>
<span class="sd">classes that inherit some subset of the aforementioned features.</span>

<span class="sd">&quot;&quot;&quot;</span>



<span class="c1">#####################################</span>
<span class="c1">## Load libraries/packages/modules ##</span>
<span class="c1">#####################################</span>

<span class="c1"># For performing deep copies.</span>
<span class="kn">import</span> <span class="nn">copy</span>

<span class="c1"># For serializing and deserializing JSON objects.</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="c1"># For performing operations on file and directory paths.</span>
<span class="kn">import</span> <span class="nn">pathlib</span>



<span class="c1"># For validating and converting objects.</span>
<span class="kn">import</span> <span class="nn">czekitout.check</span>
<span class="kn">import</span> <span class="nn">czekitout.convert</span>



<span class="c1"># Import child modules and packages of current package.</span>
<span class="kn">import</span> <span class="nn">fancytypes.version</span>



<span class="c1">############################</span>
<span class="c1">## Authorship information ##</span>
<span class="c1">############################</span>

<span class="n">__author__</span>       <span class="o">=</span> <span class="s2">&quot;Matthew Fitzpatrick&quot;</span>
<span class="n">__copyright__</span>    <span class="o">=</span> <span class="s2">&quot;Copyright 2023&quot;</span>
<span class="n">__credits__</span>      <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;Matthew Fitzpatrick&quot;</span><span class="p">]</span>
<span class="n">__version__</span>      <span class="o">=</span> <span class="n">fancytypes</span><span class="o">.</span><span class="n">version</span><span class="o">.</span><span class="n">version</span>
<span class="n">__full_version__</span> <span class="o">=</span> <span class="n">fancytypes</span><span class="o">.</span><span class="n">version</span><span class="o">.</span><span class="n">full_version</span>
<span class="n">__maintainer__</span>   <span class="o">=</span> <span class="s2">&quot;Matthew Fitzpatrick&quot;</span>
<span class="n">__email__</span>        <span class="o">=</span> <span class="s2">&quot;mrfitzpa@uvic.ca&quot;</span>
<span class="n">__status__</span>       <span class="o">=</span> <span class="s2">&quot;Development&quot;</span>



<span class="c1">###################################</span>
<span class="c1">## Useful background information ##</span>
<span class="c1">###################################</span>

<span class="c1"># See e.g. ``https://docs.python.org/3/reference/import.html#regular-packages``</span>
<span class="c1"># for a brief discussion of ``__init__.py`` files.</span>



<span class="c1">##################################</span>
<span class="c1">## Define classes and functions ##</span>
<span class="c1">##################################</span>

<span class="c1"># List of public objects in package.</span>
<span class="n">__all__</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;show_config&quot;</span><span class="p">,</span>
           <span class="s2">&quot;Checkable&quot;</span><span class="p">,</span>
           <span class="s2">&quot;Updatable&quot;</span><span class="p">,</span>
           <span class="s2">&quot;PreSerializable&quot;</span><span class="p">,</span>
           <span class="s2">&quot;PreSerializableAndUpdatable&quot;</span><span class="p">]</span>



<div class="viewcode-block" id="show_config"><a class="viewcode-back" href="../_autosummary/fancytypes.show_config.html#fancytypes.show_config">[docs]</a><span class="k">def</span> <span class="nf">show_config</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Print information about the version of ``fancytypes`` and libraries it </span>
<span class="sd">    uses.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">version</span><span class="o">.</span><span class="n">version_summary</span><span class="p">)</span>

    <span class="k">return</span> <span class="kc">None</span></div>



<div class="viewcode-block" id="Checkable"><a class="viewcode-back" href="../_autosummary/fancytypes.Checkable.html#fancytypes.Checkable">[docs]</a><span class="k">class</span> <span class="nc">Checkable</span><span class="p">():</span>
<span class="w">    </span><span class="sa">r</span><span class="sd">&quot;&quot;&quot;A type with read-only core attributes that enforces validation upon</span>
<span class="sd">    construction.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    ctor_params : `dict`</span>
<span class="sd">        A `dict` representation of the construction parameters: each `dict` key</span>
<span class="sd">        is a `str` representing the name of a construction parameter, and the</span>
<span class="sd">        corresponding `dict` value is the object to which said construction</span>
<span class="sd">        parameter is set. During construction, each construction parameter is</span>
<span class="sd">        potentially converted, and then subsequently set to a so-called &quot;core</span>
<span class="sd">        attribute&quot;.</span>
<span class="sd">    validation_and_conversion_funcs : `dict`</span>
<span class="sd">        A `dict` storing validation and conversion functions to be applied to</span>
<span class="sd">        the construction parameters: for each `dict` key ``ctor_param_name`` in</span>
<span class="sd">        ``ctor_params``, ``validation_and_conversion_funcs[ctor_param_name]``</span>
<span class="sd">        yields the validation and conversion function to be applied to the</span>
<span class="sd">        construction parameter object ``ctor_params[ctor_param_name]``. Note</span>
<span class="sd">        that the `dict` keys of ``validation_and_conversion_funcs`` must match</span>
<span class="sd">        those exactly of ``ctor_params``. Furthermore, for each `dict` key</span>
<span class="sd">        ``ctor_param_name``,</span>
<span class="sd">        ``validation_and_conversion_funcs[ctor_param_name]`` should take</span>
<span class="sd">        ``ctor_params`` as the only input argument and return the potentially</span>
<span class="sd">        converted construction parameter with the name specified by</span>
<span class="sd">        ``ctor_param_name``.</span>
<span class="sd">    </span>
<span class="sd">    Attributes</span>
<span class="sd">    ----------</span>
<span class="sd">    core_attrs : `dict`, read-only</span>
<span class="sd">        A `dict` representation of the core attributes: each `dict` key is a</span>
<span class="sd">        `str` representing the name of a core attribute, and the corresponding</span>
<span class="sd">        `dict` value is the object to which said core attribute is set.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctor_params</span><span class="p">,</span> <span class="n">validation_and_conversion_funcs</span><span class="p">):</span>
        <span class="n">czekitout</span><span class="o">.</span><span class="n">check</span><span class="o">.</span><span class="n">if_dict_like</span><span class="p">(</span><span class="n">ctor_params</span><span class="p">,</span> <span class="s2">&quot;ctor_params&quot;</span><span class="p">)</span>
        <span class="n">czekitout</span><span class="o">.</span><span class="n">check</span><span class="o">.</span><span class="n">if_dict_like</span><span class="p">(</span><span class="n">validation_and_conversion_funcs</span><span class="p">,</span>
                                     <span class="s2">&quot;validation_and_conversion_funcs&quot;</span><span class="p">)</span>
        
        <span class="n">ctor_param_names</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">validation_and_conversion_funcs</span><span class="o">.</span><span class="n">keys</span><span class="p">()))</span>
        <span class="k">if</span> <span class="n">ctor_param_names</span> <span class="o">!=</span> <span class="nb">sorted</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">ctor_params</span><span class="o">.</span><span class="n">keys</span><span class="p">())):</span>
            <span class="k">raise</span> <span class="ne">KeyError</span><span class="p">(</span><span class="n">_checkable_err_msg_1</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_core_attrs</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">ctor_param_name</span> <span class="ow">in</span> <span class="n">ctor_param_names</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">callable</span><span class="p">(</span><span class="n">validation_and_conversion_funcs</span><span class="p">[</span><span class="n">ctor_param_name</span><span class="p">]):</span>
                <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="n">_checkable_err_msg_2</span><span class="p">)</span>
            <span class="n">core_attr</span> <span class="o">=</span> \
                <span class="n">validation_and_conversion_funcs</span><span class="p">[</span><span class="n">ctor_param_name</span><span class="p">](</span><span class="n">ctor_params</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_core_attrs</span><span class="p">[</span><span class="n">ctor_param_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">core_attr</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_validation_and_conversion_funcs</span> <span class="o">=</span> <span class="n">validation_and_conversion_funcs</span>

        <span class="k">return</span> <span class="kc">None</span>



    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">core_attrs</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_core_attrs</span><span class="p">)</span></div>



<div class="viewcode-block" id="Updatable"><a class="viewcode-back" href="../_autosummary/fancytypes.Updatable.html#fancytypes.Updatable">[docs]</a><span class="k">class</span> <span class="nc">Updatable</span><span class="p">():</span>
<span class="w">    </span><span class="sa">r</span><span class="sd">&quot;&quot;&quot;A type with updatable core attributes that enforces validation upon</span>
<span class="sd">    constructing or updating an instance of said type.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    checkable_obj : :class:`fancytypes.Checkable`</span>
<span class="sd">        A &quot;checkable&quot; object, which stores the updatable core attributes and</span>
<span class="sd">        enforces validation.</span>

<span class="sd">    Attributes</span>
<span class="sd">    ----------</span>
<span class="sd">    core_attrs : `dict`, read-only</span>
<span class="sd">        A `dict` representation of the core attributes: each `dict` key is a</span>
<span class="sd">        `str` representing the name of a core attribute, and the corresponding</span>
<span class="sd">        `dict` value is the object to which said core attribute is set. Note</span>
<span class="sd">        that it is only the core attributes which can be updated directly.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">checkable_obj</span><span class="p">):</span>
        <span class="n">kwargs</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;obj&quot;</span><span class="p">:</span> <span class="n">checkable_obj</span><span class="p">,</span>
                  <span class="s2">&quot;obj_name&quot;</span><span class="p">:</span> <span class="s2">&quot;checkable_obj&quot;</span><span class="p">,</span>
                  <span class="s2">&quot;accepted_types&quot;</span><span class="p">:</span> <span class="p">(</span><span class="n">Checkable</span><span class="p">,)}</span>
        <span class="n">czekitout</span><span class="o">.</span><span class="n">check</span><span class="o">.</span><span class="n">if_instance_of_any_accepted_types</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_checkable_obj</span> <span class="o">=</span> <span class="n">checkable_obj</span>

        <span class="k">return</span> <span class="kc">None</span>



<div class="viewcode-block" id="Updatable.update"><a class="viewcode-back" href="../_autosummary/fancytypes.Updatable.html#fancytypes.Updatable.update">[docs]</a>    <span class="k">def</span> <span class="nf">update</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">core_attr_subset</span><span class="p">):</span>
<span class="w">        </span><span class="sa">r</span><span class="sd">&quot;&quot;&quot;Update a subset of the core attributes.</span>

<span class="sd">        Upon updating the subset of core attributes, the validation and</span>
<span class="sd">        conversion functions specified in the construction parameter</span>
<span class="sd">        ``checkable_obj`` are applied. See the documentation for the class</span>
<span class="sd">        :class:`fancytypes.Checkable`, namely the description of the</span>
<span class="sd">        construction parameter ``validation_and_conversion_funcs`` of that</span>
<span class="sd">        class, for a discussion on the validation and conversion functions.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        core_attr_subset : `dict`</span>
<span class="sd">            A `dict` specifying how to update a subset of the core attributes:</span>
<span class="sd">            each `dict` key of ``core_attr_subset`` that is also a key of the</span>
<span class="sd">            instance attribute :attr:`fancytypes.Updatable.core_attrs` is a</span>
<span class="sd">            `str` representing the name of a core attribute, and the</span>
<span class="sd">            corresponding `dict` value is the object to which said core</span>
<span class="sd">            attribute is to be set. Any `dict` keys of ``core_attr_subset`` that</span>
<span class="sd">            are not keys of the instance attribute</span>
<span class="sd">            :attr:`fancytypes.Updatable.core_attrs` are ignored in the update</span>
<span class="sd">            procedure along with the corresponding `dict` values.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">czekitout</span><span class="o">.</span><span class="n">check</span><span class="o">.</span><span class="n">if_dict_like</span><span class="p">(</span><span class="n">core_attr_subset</span><span class="p">,</span> <span class="s2">&quot;core_attr_subset&quot;</span><span class="p">)</span>
        <span class="n">core_attrs</span> <span class="o">=</span> <span class="n">core_attr_subset</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>

        <span class="n">names_of_core_attrs_to_update</span> <span class="o">=</span> <span class="n">core_attr_subset</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>

        <span class="k">for</span> <span class="n">core_attr_name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_checkable_obj</span><span class="o">.</span><span class="n">core_attrs</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">core_attr_name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">core_attr_subset</span><span class="p">:</span>
                <span class="n">core_attrs</span><span class="p">[</span><span class="n">core_attr_name</span><span class="p">]</span> <span class="o">=</span> \
                    <span class="bp">self</span><span class="o">.</span><span class="n">_checkable_obj</span><span class="o">.</span><span class="n">core_attrs</span><span class="p">[</span><span class="n">core_attr_name</span><span class="p">]</span>

        <span class="k">for</span> <span class="n">core_attr_name</span> <span class="ow">in</span> <span class="n">names_of_core_attrs_to_update</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">core_attr_name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_checkable_obj</span><span class="o">.</span><span class="n">core_attrs</span><span class="p">:</span>
                <span class="k">del</span> <span class="n">core_attrs</span><span class="p">[</span><span class="n">core_attr_name</span><span class="p">]</span>

        <span class="n">validation_and_conversion_funcs</span> <span class="o">=</span> \
            <span class="bp">self</span><span class="o">.</span><span class="n">_checkable_obj</span><span class="o">.</span><span class="n">_validation_and_conversion_funcs</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_checkable_obj</span> <span class="o">=</span> <span class="n">Checkable</span><span class="p">(</span><span class="n">core_attrs</span><span class="p">,</span>
                                        <span class="n">validation_and_conversion_funcs</span><span class="p">)</span>

        <span class="k">return</span> <span class="kc">None</span></div>



    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">core_attrs</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_checkable_obj</span><span class="o">.</span><span class="n">core_attrs</span></div>



<div class="viewcode-block" id="PreSerializable"><a class="viewcode-back" href="../_autosummary/fancytypes.PreSerializable.html#fancytypes.PreSerializable">[docs]</a><span class="k">class</span> <span class="nc">PreSerializable</span><span class="p">():</span>
<span class="w">    </span><span class="sa">r</span><span class="sd">&quot;&quot;&quot;A type that is pre-serializable, that can be constructed from a </span>
<span class="sd">    serializable representation, and that enforces validation upon construction.</span>

<span class="sd">    We define pre-serialization as the process of converting an object into a</span>
<span class="sd">    form that can be subsequently serialized into a JSON format. We refer to</span>
<span class="sd">    objects resulting from pre-serialization as serializable objects.</span>

<span class="sd">    We define de-pre-serialization as the process of converting a serializable</span>
<span class="sd">    object into its original type, i.e. de-pre-serialization is the reverse</span>
<span class="sd">    process of pre-serialization.</span>

<span class="sd">    **Note**: One cannot create instances of :class:`fancytypes.PreSerializable`</span>
<span class="sd">    without throwing an error. In order to make proper use of the</span>
<span class="sd">    :class:`fancytypes.PreSerializable` class, one must define a subclass which</span>
<span class="sd">    inherits from it and set three private class attributes in the definition:</span>
<span class="sd">    ``_validation_and_conversion_funcs``, ``_pre_serialization_funcs``, and</span>
<span class="sd">    ``_de_pre_serialization_funcs``. </span>

<span class="sd">    ``_validation_and_conversion_funcs`` is a `dict` storing validation and</span>
<span class="sd">    conversion functions to be applied to the construction parameters</span>
<span class="sd">    [represented by the `dict` ``ctor_params`` below]: for each `dict` key</span>
<span class="sd">    ``ctor_param_name`` in ``ctor_params``,</span>
<span class="sd">    ``_validation_and_conversion_funcs[ctor_param_name]`` yields the validation</span>
<span class="sd">    and conversion function to be applied to the construction parameter object</span>
<span class="sd">    ``ctor_params[ctor_param_name]``. Note that the `dict` keys of</span>
<span class="sd">    ``_validation_and_conversion_funcs`` must match those exactly of</span>
<span class="sd">    ``ctor_params``. Furthermore, for each `dict` key ``ctor_param_name``,</span>
<span class="sd">    ``_validation_and_conversion_funcs[ctor_param_name]`` should take</span>
<span class="sd">    ``ctor_params`` as the only input argument and return the potentially</span>
<span class="sd">    converted construction parameter with the name specified by</span>
<span class="sd">    ``ctor_param_name``.</span>

<span class="sd">    ``_pre_serialization_funcs`` is a `dict` storing pre-serialization functions</span>
<span class="sd">    to be applied to the core attributes [represented by the instance attribute</span>
<span class="sd">    :attr:`fancytypes.PreSerializable.core_attrs` introduced below]: for each</span>
<span class="sd">    `dict` key ``core_attr_name`` in</span>
<span class="sd">    :attr:`fancytypes.PreSerializable.core_attrs` [the latter of which we denote</span>
<span class="sd">    here as ``core_attrs``], ``_pre_serialization_funcs[core_attr_name]`` yields</span>
<span class="sd">    the pre-serialization function to be applied to the core attribute</span>
<span class="sd">    ``core_attrs[core_attr_name]``, upon calling the method</span>
<span class="sd">    :meth:`fancytypes.PreSerializable.pre_serialize`. Note that the `dict` keys</span>
<span class="sd">    of ``_pre_serialization_funcs`` must match those exactly of ``core_attrs``</span>
<span class="sd">    and ``ctor_params``. Furthermore, for each `dict` key ``core_attr_name``,</span>
<span class="sd">    ``_pre_serialization_funcs[core_attr_name]`` should take ``core_attrs`` as</span>
<span class="sd">    the only input argument and return the serializable representation of the</span>
<span class="sd">    core attribute with the name specified by ``core_attr_name``.</span>

<span class="sd">    ``_de_pre_serialization_funcs`` is a `dict` storing de-pre-serialization</span>
<span class="sd">    functions to be applied to serializable representations of the core</span>
<span class="sd">    attributes of any instance of the :class:`fancytypes.PreSerializable` class</span>
<span class="sd">    or subclass: for each `dict` key ``core_attr_name`` in ``core_attrs``,</span>
<span class="sd">    ``_de_pre_serialization_funcs[core_attr_name]`` yields the</span>
<span class="sd">    de-pre-serialization function to be applied to the serializable</span>
<span class="sd">    representation of the core attribute with the name specified by</span>
<span class="sd">    ``core_attr_name``, upon calling the class method</span>
<span class="sd">    :meth:`fancytypes.PreSerializable.de_pre_serialize`. Note that the `dict`</span>
<span class="sd">    keys of ``_de_pre_serialization_funcs`` must match those exactly of</span>
<span class="sd">    ``core_attrs`` and ``ctor_params``. Furthermore, for each `dict` key</span>
<span class="sd">    ``core_attr_name``, ``_de_pre_serialization_funcs[core_attr_name]`` should</span>
<span class="sd">    take the serializable representation of the core attribute with the name</span>
<span class="sd">    specified by ``core_attr_name`` as the only input argument and return the</span>
<span class="sd">    de-serialized form of said core attribute.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    ctor_params : `dict`</span>
<span class="sd">        A `dict` representation of the construction parameters: each `dict` key</span>
<span class="sd">        is a `str` representing the name of a construction parameter, and the</span>
<span class="sd">        corresponding `dict` value is the object to which said construction</span>
<span class="sd">        parameter is set. During construction, each construction parameter is</span>
<span class="sd">        potentially converted, and then subsequently set to a so-called &quot;core</span>
<span class="sd">        attribute&quot;.</span>

<span class="sd">    Attributes</span>
<span class="sd">    ----------</span>
<span class="sd">    core_attrs : `dict`, read-only</span>
<span class="sd">        A `dict` representation of the core attributes: each `dict` key is a</span>
<span class="sd">        `str` representing the name of a core attribute, and the corresponding</span>
<span class="sd">        `dict` value is the object to which said core attribute is set.</span>

<span class="sd">        **Note**: If the currently documented class, which we denote here as</span>
<span class="sd">        ``cls``, is neither :class:`PreSerializable` nor</span>
<span class="sd">        :class:`PreSerializableAndUpdatable`, then in order for ``cls`` to be</span>
<span class="sd">        well-behaved, it must satisfy ``instance.core_attrs ==</span>
<span class="sd">        cls(**instance.core_attrs).core_attrs``, where ``instance`` is any</span>
<span class="sd">        instance of ``cls`` that was constructed without error.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctor_params</span><span class="p">):</span>
        <span class="n">validation_and_conversion_funcs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_validation_and_conversion_funcs</span>
        <span class="n">pre_serialization_funcs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pre_serialization_funcs</span>
        <span class="n">de_pre_serialization_funcs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_de_pre_serialization_funcs</span>

        <span class="n">checkable_obj</span> <span class="o">=</span> <span class="n">Checkable</span><span class="p">(</span><span class="n">ctor_params</span><span class="p">,</span> <span class="n">validation_and_conversion_funcs</span><span class="p">)</span>

        <span class="n">czekitout</span><span class="o">.</span><span class="n">check</span><span class="o">.</span><span class="n">if_dict_like</span><span class="p">(</span><span class="n">pre_serialization_funcs</span><span class="p">,</span>
                                     <span class="s2">&quot;pre_serialization_funcs&quot;</span><span class="p">)</span>
        
        <span class="n">core_attr_names</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">pre_serialization_funcs</span><span class="o">.</span><span class="n">keys</span><span class="p">()))</span>
        
        <span class="k">if</span> <span class="n">core_attr_names</span> <span class="o">!=</span> <span class="nb">sorted</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">checkable_obj</span><span class="o">.</span><span class="n">core_attrs</span><span class="o">.</span><span class="n">keys</span><span class="p">())):</span>
            <span class="k">raise</span> <span class="ne">KeyError</span><span class="p">(</span><span class="n">_pre_serializable_err_msg_1</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">core_attr_name</span> <span class="ow">in</span> <span class="n">checkable_obj</span><span class="o">.</span><span class="n">core_attrs</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">callable</span><span class="p">(</span><span class="n">pre_serialization_funcs</span><span class="p">[</span><span class="n">core_attr_name</span><span class="p">]):</span>
                <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="n">_pre_serializable_err_msg_2</span><span class="p">)</span>

        <span class="n">czekitout</span><span class="o">.</span><span class="n">check</span><span class="o">.</span><span class="n">if_dict_like</span><span class="p">(</span><span class="n">de_pre_serialization_funcs</span><span class="p">,</span>
                                     <span class="s2">&quot;de_pre_serialization_funcs&quot;</span><span class="p">)</span>
        <span class="n">core_attr_names</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">de_pre_serialization_funcs</span><span class="o">.</span><span class="n">keys</span><span class="p">()))</span>
        
        <span class="k">if</span> <span class="n">core_attr_names</span> <span class="o">!=</span> <span class="nb">sorted</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">checkable_obj</span><span class="o">.</span><span class="n">core_attrs</span><span class="o">.</span><span class="n">keys</span><span class="p">())):</span>
            <span class="k">raise</span> <span class="ne">KeyError</span><span class="p">(</span><span class="n">_pre_serializable_err_msg_3</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">core_attr_name</span> <span class="ow">in</span> <span class="n">core_attr_names</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">callable</span><span class="p">(</span><span class="n">de_pre_serialization_funcs</span><span class="p">[</span><span class="n">core_attr_name</span><span class="p">]):</span>
                <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="n">_pre_serializable_err_msg_4</span><span class="p">)</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">_checkable_obj</span> <span class="o">=</span> <span class="n">checkable_obj</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">serializable_rep</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pre_serialize</span><span class="p">()</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">_pre_serializable_err_msg_5</span><span class="p">)</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">construct_ctor_params_from_serializable_rep</span> <span class="o">=</span> \
                <span class="bp">self</span><span class="o">.</span><span class="n">_construct_ctor_params_from_serializable_rep</span>
            <span class="n">ctor_params</span> <span class="o">=</span> \
                <span class="n">construct_ctor_params_from_serializable_rep</span><span class="p">(</span><span class="n">serializable_rep</span><span class="p">)</span>
            <span class="n">Checkable</span><span class="p">(</span><span class="n">ctor_params</span><span class="p">,</span> <span class="n">validation_and_conversion_funcs</span><span class="p">)</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">_pre_serializable_err_msg_6</span><span class="p">)</span>
        
        <span class="k">return</span> <span class="kc">None</span>



    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">_construct_ctor_params_from_serializable_rep</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">serializable_rep</span><span class="p">):</span>
        <span class="n">ctor_params</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">()</span>
        
        <span class="n">validation_and_conversion_funcs</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_validation_and_conversion_funcs</span>
        
        <span class="n">de_pre_serialization_funcs</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_de_pre_serialization_funcs</span>
        <span class="n">ctor_param_names</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">de_pre_serialization_funcs</span><span class="o">.</span><span class="n">keys</span><span class="p">()))</span>
        
        <span class="n">czekitout</span><span class="o">.</span><span class="n">check</span><span class="o">.</span><span class="n">if_dict_like</span><span class="p">(</span><span class="n">serializable_rep</span><span class="p">,</span> <span class="s2">&quot;serializable_rep&quot;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">ctor_param_name</span> <span class="ow">in</span> <span class="n">ctor_param_names</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">ctor_param_name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">serializable_rep</span><span class="p">:</span>
                <span class="n">err_msg</span> <span class="o">=</span> <span class="n">_pre_serializable_err_msg_7</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ctor_param_name</span><span class="p">)</span>
                <span class="k">raise</span> <span class="ne">KeyError</span><span class="p">(</span><span class="n">err_msg</span><span class="p">)</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">serializable_rep</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">ctor_param_name</span> <span class="ow">in</span> <span class="n">ctor_param_names</span><span class="p">:</span>
                <span class="n">datasubset</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">ctor_param_name</span><span class="p">]</span>
                <span class="n">de_pre_serialize</span> <span class="o">=</span> <span class="n">de_pre_serialization_funcs</span><span class="p">[</span><span class="n">ctor_param_name</span><span class="p">]</span>
                <span class="n">ctor_params</span><span class="p">[</span><span class="n">ctor_param_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">de_pre_serialize</span><span class="p">(</span><span class="n">datasubset</span><span class="p">)</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="n">err_msg</span> <span class="o">=</span> <span class="n">_pre_serializable_err_msg_8</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ctor_param_name</span><span class="p">)</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">err_msg</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">ctor_params</span>



<div class="viewcode-block" id="PreSerializable.de_pre_serialize"><a class="viewcode-back" href="../_autosummary/fancytypes.PreSerializable.html#fancytypes.PreSerializable.de_pre_serialize">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">de_pre_serialize</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">serializable_rep</span><span class="p">):</span>
<span class="w">        </span><span class="sa">r</span><span class="sd">&quot;&quot;&quot;Construct an instance from a serializable representation.</span>

<span class="sd">        We define pre-serialization as the process of converting an object into</span>
<span class="sd">        a form that can be subsequently serialized into a JSON format. We refer</span>
<span class="sd">        to objects resulting from pre-serialization as serializable objects.</span>

<span class="sd">        We define de-pre-serialization as the process of converting a</span>
<span class="sd">        serializable object into its original type, i.e. de-pre-serialization is</span>
<span class="sd">        the reverse process of pre-serialization.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        serializable_rep : `dict`</span>
<span class="sd">            A serializable representation of an instance. Serializable</span>
<span class="sd">            representations can be generated using the instance method </span>
<span class="sd">            :meth:`fancytypes.PreSerializable.pre_serialize`.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        pre_serializable_obj : :class:`fancytypes.PreSerializable`</span>
<span class="sd">            An instance constructed from the serializable representation</span>
<span class="sd">            ``serializable_rep``.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">ctor_params</span> <span class="o">=</span> \
            <span class="bp">cls</span><span class="o">.</span><span class="n">_construct_ctor_params_from_serializable_rep</span><span class="p">(</span><span class="n">serializable_rep</span><span class="p">)</span>

        <span class="k">if</span> <span class="p">(</span><span class="bp">cls</span> <span class="ow">is</span> <span class="n">PreSerializable</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="bp">cls</span> <span class="ow">is</span> <span class="n">PreSerializableAndUpdatable</span><span class="p">):</span>
            <span class="n">pre_serializable_obj</span> <span class="o">=</span> <span class="bp">cls</span><span class="p">(</span><span class="n">ctor_params</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">pre_serializable_obj</span> <span class="o">=</span> <span class="bp">cls</span><span class="p">(</span><span class="o">**</span><span class="n">ctor_params</span><span class="p">)</span>
                
        <span class="k">return</span> <span class="n">pre_serializable_obj</span></div>



<div class="viewcode-block" id="PreSerializable.pre_serialize"><a class="viewcode-back" href="../_autosummary/fancytypes.PreSerializable.html#fancytypes.PreSerializable.pre_serialize">[docs]</a>    <span class="k">def</span> <span class="nf">pre_serialize</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sa">r</span><span class="sd">&quot;&quot;&quot;Pre-serialize instance.</span>

<span class="sd">        We define pre-serialization as the process of converting an object into</span>
<span class="sd">        a form that can be subsequently serialized into a JSON format. We refer</span>
<span class="sd">        to objects resulting from pre-serialization as serializable objects.</span>

<span class="sd">        We define de-pre-serialization as the process of converting a</span>
<span class="sd">        serializable object into its original type, i.e. de-pre-serialization is</span>
<span class="sd">        the reverse process of pre-serialization.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        serializable_rep : `dict`</span>
<span class="sd">            A serializable representation of an instance.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">data</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">core_attr_name</span><span class="p">,</span> <span class="n">core_attr</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">core_attrs</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">_pre_serialize</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pre_serialization_funcs</span><span class="p">[</span><span class="n">core_attr_name</span><span class="p">]</span>
            <span class="n">datasubset</span> <span class="o">=</span> <span class="n">_pre_serialize</span><span class="p">(</span><span class="n">core_attr</span><span class="p">)</span>
            <span class="n">data</span><span class="p">[</span><span class="n">core_attr_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">datasubset</span>

        <span class="n">serializable_rep</span> <span class="o">=</span> <span class="n">data</span>

        <span class="k">return</span> <span class="n">serializable_rep</span></div>



<div class="viewcode-block" id="PreSerializable.dumps"><a class="viewcode-back" href="../_autosummary/fancytypes.PreSerializable.html#fancytypes.PreSerializable.dumps">[docs]</a>    <span class="k">def</span> <span class="nf">dumps</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sa">r</span><span class="sd">&quot;&quot;&quot;Serialize instance.</span>
<span class="sd">        </span>
<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        serialized_rep : `dict`</span>
<span class="sd">            A serialized representation of an instance.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">serializable_rep</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pre_serialize</span><span class="p">()</span>
        <span class="n">serialized_rep</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">serializable_rep</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">serialized_rep</span></div>



<div class="viewcode-block" id="PreSerializable.dump"><a class="viewcode-back" href="../_autosummary/fancytypes.PreSerializable.html#fancytypes.PreSerializable.dump">[docs]</a>    <span class="k">def</span> <span class="nf">dump</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filename</span><span class="p">,</span> <span class="n">overwrite</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sa">r</span><span class="sd">&quot;&quot;&quot;Serialize instance and save the result in a JSON file.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        filename : `str`</span>
<span class="sd">            The relative or absolute path to the JSON file in which to store the</span>
<span class="sd">            serialized representation of an instance.</span>
<span class="sd">        overwrite : `bool`, optional</span>
<span class="sd">            If ``overwrite`` is set to ``False`` and a file exists at the path</span>
<span class="sd">            ``filename``, then the serialized instance is not written to that</span>
<span class="sd">            file and an exception is raised. Otherwise, the serialized instance</span>
<span class="sd">            will be written to that file barring no other issues occur.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">kwargs</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;obj&quot;</span><span class="p">:</span> <span class="n">overwrite</span><span class="p">,</span> <span class="s2">&quot;obj_name&quot;</span><span class="p">:</span> <span class="s2">&quot;overwrite&quot;</span><span class="p">}</span>
        <span class="n">overwrite</span> <span class="o">=</span> <span class="n">czekitout</span><span class="o">.</span><span class="n">convert</span><span class="o">.</span><span class="n">to_bool</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        
        <span class="n">kwargs</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;obj&quot;</span><span class="p">:</span> <span class="n">filename</span><span class="p">,</span> <span class="s2">&quot;obj_name&quot;</span><span class="p">:</span> <span class="s2">&quot;filename&quot;</span><span class="p">}</span>
        <span class="n">filename</span> <span class="o">=</span> <span class="n">czekitout</span><span class="o">.</span><span class="n">convert</span><span class="o">.</span><span class="n">to_str_from_path_like</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span><span class="o">.</span><span class="n">is_file</span><span class="p">():</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">overwrite</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">IOError</span><span class="p">(</span><span class="n">_pre_serializable_err_msg_9</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">filename</span><span class="p">))</span>

        <span class="n">serializable_rep</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pre_serialize</span><span class="p">()</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">file_obj</span><span class="p">:</span>
                <span class="n">json</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">serializable_rep</span><span class="p">,</span>
                          <span class="n">file_obj</span><span class="p">,</span>
                          <span class="n">ensure_ascii</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                          <span class="n">indent</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">IOError</span><span class="p">(</span><span class="n">_pre_serializable_err_msg_10</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">filename</span><span class="p">))</span>
            
        <span class="k">return</span> <span class="kc">None</span></div>



<div class="viewcode-block" id="PreSerializable.loads"><a class="viewcode-back" href="../_autosummary/fancytypes.PreSerializable.html#fancytypes.PreSerializable.loads">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">loads</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">serialized_rep</span><span class="p">):</span>
<span class="w">        </span><span class="sa">r</span><span class="sd">&quot;&quot;&quot;Construct an instance from a serialized representation.</span>

<span class="sd">        Users can generate serialized representations using the method</span>
<span class="sd">        :meth:`fancytypes.PreSerializable.dumps`.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        serialized_rep : `str` | `bytes` | `bytearray`</span>
<span class="sd">            The serialized representation.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        pre_serializable_obj : :class:`fancytypes.PreSerializable`</span>
<span class="sd">            An instance constructed from the serialized representation.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">kwargs</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;obj&quot;</span><span class="p">:</span> <span class="n">serialized_rep</span><span class="p">,</span>
                  <span class="s2">&quot;obj_name&quot;</span><span class="p">:</span> <span class="s2">&quot;serialized_rep&quot;</span><span class="p">,</span>
                  <span class="s2">&quot;accepted_types&quot;</span><span class="p">:</span> <span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="nb">bytes</span><span class="p">,</span> <span class="nb">bytearray</span><span class="p">)}</span>
        <span class="n">czekitout</span><span class="o">.</span><span class="n">check</span><span class="o">.</span><span class="n">if_instance_of_any_accepted_types</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        
        <span class="k">try</span><span class="p">:</span>
            <span class="n">serializable_rep</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">serialized_rep</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">json</span><span class="o">.</span><span class="n">decoder</span><span class="o">.</span><span class="n">JSONDecodeError</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">_pre_serializable_err_msg_11</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">BaseException</span> <span class="k">as</span> <span class="n">err</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">err</span>

        <span class="n">pre_serializable_obj</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">de_pre_serialize</span><span class="p">(</span><span class="n">serializable_rep</span><span class="p">)</span>
                
        <span class="k">return</span> <span class="n">pre_serializable_obj</span></div>



<div class="viewcode-block" id="PreSerializable.load"><a class="viewcode-back" href="../_autosummary/fancytypes.PreSerializable.html#fancytypes.PreSerializable.load">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">load</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">filename</span><span class="p">):</span>
<span class="w">        </span><span class="sa">r</span><span class="sd">&quot;&quot;&quot;Construct an instance from a serialized representation that is </span>
<span class="sd">        stored in a JSON file.</span>

<span class="sd">        Users can save serialized representations to JSON files using the method</span>
<span class="sd">        :meth:`fancytypes.PreSerializable.dump`.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        filename : `str`</span>
<span class="sd">            The relative or absolute path to the JSON file that is storing the</span>
<span class="sd">            serialized representation of an instance.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        pre_serializable_obj : :class:`fancytypes.PreSerializable`</span>
<span class="sd">            An instance constructed from the serialized representation</span>
<span class="sd">            stored in the JSON file.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">kwargs</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;obj&quot;</span><span class="p">:</span> <span class="n">filename</span><span class="p">,</span> <span class="s2">&quot;obj_name&quot;</span><span class="p">:</span> <span class="s2">&quot;filename&quot;</span><span class="p">}</span>
        <span class="n">filename</span> <span class="o">=</span> <span class="n">czekitout</span><span class="o">.</span><span class="n">convert</span><span class="o">.</span><span class="n">to_str_from_path_like</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        
        <span class="k">try</span><span class="p">:</span>
            <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">file_obj</span><span class="p">:</span>
                <span class="n">serializable_rep</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">file_obj</span><span class="p">)</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">IOError</span><span class="p">(</span><span class="n">_pre_serializable_err_msg_12</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">filename</span><span class="p">))</span>

        <span class="n">pre_serializable_obj</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">de_pre_serialize</span><span class="p">(</span><span class="n">serializable_rep</span><span class="p">)</span>
                
        <span class="k">return</span> <span class="n">pre_serializable_obj</span></div>



    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">core_attrs</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_checkable_obj</span><span class="o">.</span><span class="n">core_attrs</span></div>



<div class="viewcode-block" id="PreSerializableAndUpdatable"><a class="viewcode-back" href="../_autosummary/fancytypes.PreSerializableAndUpdatable.html#fancytypes.PreSerializableAndUpdatable">[docs]</a><span class="k">class</span> <span class="nc">PreSerializableAndUpdatable</span><span class="p">(</span><span class="n">PreSerializable</span><span class="p">):</span>
<span class="w">    </span><span class="sa">r</span><span class="sd">&quot;&quot;&quot;A type with updatable core attributes, that is pre-serializable, that </span>
<span class="sd">    can be constructed from a serializable representation, and that enforces </span>
<span class="sd">    validation upon construction.</span>

<span class="sd">    We define pre-serialization as the process of converting an object into a</span>
<span class="sd">    form that can be subsequently serialized into a JSON format. We refer to</span>
<span class="sd">    objects resulting from pre-serialization as serializable objects.</span>

<span class="sd">    We define de-pre-serialization as the process of converting a serializable</span>
<span class="sd">    object into its original type, i.e. de-pre-serialization is the reverse</span>
<span class="sd">    process of pre-serialization.</span>

<span class="sd">    **Note**: One cannot create instances of</span>
<span class="sd">    :class:`fancytypes.PreSerializableAndUpdatable` without throwing an</span>
<span class="sd">    error. In order to make proper use of the</span>
<span class="sd">    :class:`fancytypes.PreSerializableAndUpdatable` class, one must define a</span>
<span class="sd">    subclass which inherits from it and set three private class attributes in</span>
<span class="sd">    the definition: ``_validation_and_conversion_funcs``,</span>
<span class="sd">    ``_pre_serialization_funcs``, and ``_de_pre_serialization_funcs``.</span>

<span class="sd">    ``_validation_and_conversion_funcs`` is a `dict` storing validation and</span>
<span class="sd">    conversion functions to be applied to the construction parameters</span>
<span class="sd">    [represented by the `dict` ``ctor_params`` below]: for each `dict` key</span>
<span class="sd">    ``ctor_param_name`` in ``ctor_params``,</span>
<span class="sd">    ``_validation_and_conversion_funcs[ctor_param_name]`` yields the validation</span>
<span class="sd">    and conversion function to be applied to the construction parameter object</span>
<span class="sd">    ``ctor_params[ctor_param_name]``. Note that the `dict` keys of</span>
<span class="sd">    ``_validation_and_conversion_funcs`` must match those exactly of</span>
<span class="sd">    ``ctor_params``. Furthermore, for each `dict` key ``ctor_param_name``,</span>
<span class="sd">    ``_validation_and_conversion_funcs[ctor_param_name]`` should take</span>
<span class="sd">    ``ctor_params`` as the only input argument and return the potentially</span>
<span class="sd">    converted construction parameter with the name specified by</span>
<span class="sd">    ``ctor_param_name``.</span>

<span class="sd">    ``_pre_serialization_funcs`` is a `dict` storing pre-serialization functions</span>
<span class="sd">    to be applied to the core attributes [represented by the instance attribute</span>
<span class="sd">    :attr:`fancytypes.PreSerializableAndUpdatable.core_attrs` introduced below]:</span>
<span class="sd">    for each `dict` key ``core_attr_name`` in</span>
<span class="sd">    :attr:`fancytypes.PreSerializableAndUpdatable.core_attrs` [the latter of</span>
<span class="sd">    which we denote here as ``core_attrs``],</span>
<span class="sd">    ``_pre_serialization_funcs[core_attr_name]`` yields the pre-serialization</span>
<span class="sd">    function to be applied to the core attribute ``core_attrs[core_attr_name]``,</span>
<span class="sd">    upon calling the method</span>
<span class="sd">    :meth:`fancytypes.PreSerializableAndUpdatable.pre_serialize`. Note that the</span>
<span class="sd">    `dict` keys of ``_pre_serialization_funcs`` must match those exactly of</span>
<span class="sd">    ``core_attrs`` and ``ctor_params``. Furthermore, for each `dict` key</span>
<span class="sd">    ``core_attr_name``, ``_pre_serialization_funcs[core_attr_name]`` should take</span>
<span class="sd">    ``core_attrs`` as the only input argument and return the serializable</span>
<span class="sd">    representation of the core attribute with the name specified by</span>
<span class="sd">    ``core_attr_name``.</span>

<span class="sd">    ``_de_pre_serialization_funcs`` is a `dict` storing de-pre-serialization</span>
<span class="sd">    functions to be applied to serializable representations of the core</span>
<span class="sd">    attributes of any instance of the</span>
<span class="sd">    :class:`fancytypes.PreSerializableAndUpdatable` class or subclass: for each</span>
<span class="sd">    `dict` key ``core_attr_name`` in ``core_attrs``,</span>
<span class="sd">    ``_de_pre_serialization_funcs[core_attr_name]`` yields the</span>
<span class="sd">    de-pre-serialization function to be applied to the serializable</span>
<span class="sd">    representation of the core attribute with the name specified by</span>
<span class="sd">    ``core_attr_name``, upon calling the class method</span>
<span class="sd">    :meth:`fancytypes.PreSerializableAndUpdatable.de_pre_serialize`. Note that</span>
<span class="sd">    the `dict` keys of ``_de_pre_serialization_funcs`` must match those exactly</span>
<span class="sd">    of ``core_attrs`` and ``ctor_params``. Furthermore, for each `dict` key</span>
<span class="sd">    ``core_attr_name``, ``_de_pre_serialization_funcs[core_attr_name]`` should</span>
<span class="sd">    take the serializable representation of the core attribute with the name</span>
<span class="sd">    specified by ``core_attr_name`` as the only input argument and return the</span>
<span class="sd">    de-serialized form of said core attribute.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    ctor_params : `dict`</span>
<span class="sd">        A `dict` representation of the construction parameters: each `dict` key</span>
<span class="sd">        is a `str` representing the name of a construction parameter, and the</span>
<span class="sd">        corresponding `dict` value is the object to which said construction</span>
<span class="sd">        parameter is set. During construction, each construction parameter is</span>
<span class="sd">        potentially converted, and then subsequently set to a so-called &quot;core</span>
<span class="sd">        attribute&quot;.</span>

<span class="sd">    Attributes</span>
<span class="sd">    ----------</span>
<span class="sd">    core_attrs : `dict`, read-only</span>
<span class="sd">        A `dict` representation of the core attributes: each `dict` key is a</span>
<span class="sd">        `str` representing the name of a core attribute, and the corresponding</span>
<span class="sd">        `dict` value is the object to which said core attribute is set.</span>

<span class="sd">        **Note**: If the currently documented class, which we denote here as</span>
<span class="sd">        ``cls``, is neither :class:`PreSerializable` nor</span>
<span class="sd">        :class:`PreSerializableAndUpdatable`, then in order for ``cls`` to be</span>
<span class="sd">        well-behaved, it must satisfy ``instance.core_attrs ==</span>
<span class="sd">        cls(**instance.core_attrs).core_attrs``, where ``instance`` is any</span>
<span class="sd">        instance of ``cls`` that was constructed without error.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctor_params</span><span class="p">):</span>
        <span class="n">PreSerializable</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctor_params</span><span class="p">)</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">_updatable_obj</span> <span class="o">=</span> <span class="n">Updatable</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_checkable_obj</span><span class="p">)</span>
        
        <span class="k">return</span> <span class="kc">None</span>



<div class="viewcode-block" id="PreSerializableAndUpdatable.update"><a class="viewcode-back" href="../_autosummary/fancytypes.PreSerializableAndUpdatable.html#fancytypes.PreSerializableAndUpdatable.update">[docs]</a>    <span class="k">def</span> <span class="nf">update</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">core_attr_subset</span><span class="p">):</span>
<span class="w">        </span><span class="sa">r</span><span class="sd">&quot;&quot;&quot;Update a subset of the core attributes.</span>

<span class="sd">        Upon updating the subset of core attributes, the validation and</span>
<span class="sd">        conversion functions specified in the private class attribute</span>
<span class="sd">        ``_validation_and_conversion_funcs`` are applied. See the preamble of</span>
<span class="sd">        the documentation for the class</span>
<span class="sd">        :class:`fancytypes.PreSerializableAndUpdatable` for a discussion on the</span>
<span class="sd">        validation and conversion functions.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        core_attr_subset : `dict`</span>
<span class="sd">            A `dict` specifying how to update a subset of the core attributes:</span>
<span class="sd">            each `dict` key of ``core_attr_subset`` that is also a key of the</span>
<span class="sd">            instance attribute</span>
<span class="sd">            :attr:`fancytypes.PreSerializableAndUpdatable.core_attrs` is a `str`</span>
<span class="sd">            representing the name of a core attribute, and the corresponding</span>
<span class="sd">            `dict` value is the object to which said core attribute is to be</span>
<span class="sd">            set. Any `dict` keys of ``core_attr_subset`` that are not keys of</span>
<span class="sd">            the instance attribute</span>
<span class="sd">            :attr:`fancytypes.PreSerializableAndUpdatable.core_attrs` are</span>
<span class="sd">            ignored in the update procedure along with the corresponding `dict`</span>
<span class="sd">            values.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_updatable_obj</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">core_attr_subset</span><span class="p">)</span>
        
        <span class="n">ctor_params</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_updatable_obj</span><span class="o">.</span><span class="n">core_attrs</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_checkable_obj</span> <span class="o">=</span> <span class="n">Checkable</span><span class="p">(</span><span class="n">ctor_params</span><span class="p">,</span>
                                        <span class="bp">self</span><span class="o">.</span><span class="n">_validation_and_conversion_funcs</span><span class="p">)</span>

        <span class="k">return</span> <span class="kc">None</span></div></div>



<span class="c1">###########################</span>
<span class="c1">## Define error messages ##</span>
<span class="c1">###########################</span>

<span class="n">_checkable_err_msg_1</span> <span class="o">=</span> \
    <span class="p">(</span><span class="s2">&quot;The objects ``ctor_params`` and ``validation_and_conversion_funcs`` have &quot;</span>
     <span class="s2">&quot;mismatching key sets.&quot;</span><span class="p">)</span>
<span class="n">_checkable_err_msg_2</span> <span class="o">=</span> \
    <span class="p">(</span><span class="s2">&quot;The object ``validation_and_conversion_funcs`` must be a dictionary with &quot;</span>
     <span class="s2">&quot;values set to only callable objects.&quot;</span><span class="p">)</span>

<span class="n">_pre_serializable_err_msg_1</span> <span class="o">=</span> \
    <span class="p">(</span><span class="s2">&quot;The object ``ctor_params`` and the private class attribute &quot;</span>
     <span class="s2">&quot;``_pre_serialization_funcs`` have mismatching key sets.&quot;</span><span class="p">)</span>
<span class="n">_pre_serializable_err_msg_2</span> <span class="o">=</span> \
    <span class="p">(</span><span class="s2">&quot;The private class attribute ``_pre_serialization_funcs`` must be a &quot;</span>
     <span class="s2">&quot;dictionary with values set to only callable objects.&quot;</span><span class="p">)</span>
<span class="n">_pre_serializable_err_msg_3</span> <span class="o">=</span> \
    <span class="p">(</span><span class="s2">&quot;The object ``ctor_params`` and the private class attribute &quot;</span>
     <span class="s2">&quot;``_de_pre_serialization_funcs`` have mismatching key sets.&quot;</span><span class="p">)</span>
<span class="n">_pre_serializable_err_msg_4</span> <span class="o">=</span> \
    <span class="p">(</span><span class="s2">&quot;The private class attribute ``_de_pre_serialization_funcs`` must be a &quot;</span>
     <span class="s2">&quot;dictionary with values set to only callable objects.&quot;</span><span class="p">)</span>
<span class="n">_pre_serializable_err_msg_5</span> <span class="o">=</span> \
    <span class="p">(</span><span class="s2">&quot;An error occurred in testing the instance method ``pre_serialize``: see &quot;</span>
     <span class="s2">&quot;the remaining traceback for details.&quot;</span><span class="p">)</span>
<span class="n">_pre_serializable_err_msg_6</span> <span class="o">=</span> \
    <span class="p">(</span><span class="s2">&quot;An error occurred in testing part of the class method &quot;</span>
     <span class="s2">&quot;``de_pre_serialize``: see the remaining traceback for details.&quot;</span><span class="p">)</span>
<span class="n">_pre_serializable_err_msg_7</span> <span class="o">=</span> \
    <span class="p">(</span><span class="s2">&quot;The object ``serializable_rep`` is missing the key ``&#39;</span><span class="si">{}</span><span class="s2">&#39;``.&quot;</span><span class="p">)</span>
<span class="n">_pre_serializable_err_msg_8</span> <span class="o">=</span> \
    <span class="p">(</span><span class="s2">&quot;An error occurred in attempting to construct the object ``</span><span class="si">{}</span><span class="s2">`` from a &quot;</span>
     <span class="s2">&quot;serializable representation.&quot;</span><span class="p">)</span>
<span class="n">_pre_serializable_err_msg_9</span> <span class="o">=</span> \
    <span class="p">(</span><span class="s2">&quot;Cannot save the serialized representation to a file at the path ``&#39;</span><span class="si">{}</span><span class="s2">&#39;`` &quot;</span>
     <span class="s2">&quot;because a file already exists there and the object ``overwrite`` was set &quot;</span>
     <span class="s2">&quot;to ``False``, which prohibits overwriting the original file.&quot;</span><span class="p">)</span>
<span class="n">_pre_serializable_err_msg_10</span> <span class="o">=</span> \
    <span class="p">(</span><span class="s2">&quot;An error occurred in trying to save the serialized representation to the &quot;</span>
     <span class="s2">&quot;file at the path ``&#39;</span><span class="si">{}</span><span class="s2">&#39;``: see the traceback for details.&quot;</span><span class="p">)</span>
<span class="n">_pre_serializable_err_msg_11</span> <span class="o">=</span> \
    <span class="p">(</span><span class="s2">&quot;The object ``serialized_rep`` must be a valid JSON document.&quot;</span><span class="p">)</span>
<span class="n">_pre_serializable_err_msg_12</span> <span class="o">=</span> \
    <span class="p">(</span><span class="s2">&quot;The filename ``&#39;</span><span class="si">{}</span><span class="s2">&#39;`` is invalid: see the traceback for details.&quot;</span><span class="p">)</span>
</pre></div>

           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023, Matthew Fitzpatrick.
      <span class="lastupdated">Last updated on Jan 17, 2023.
      </span></p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>